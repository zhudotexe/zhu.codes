var xe=Object.defineProperty;var Oe=(e,t,s)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var N=(e,t,s)=>(Oe(e,typeof t!="symbol"?t+"":t,s),s);import{c as We,d as U,r as V,w as pe,u as W,o as _,a as f,b as n,t as m,e as Fe,n as Z,_ as ne,D as T,P as Ue,f as ve,g as ge,h as J,i as Ee,T as Re,j as X,k as ce,l as Ve,m as de,p as g,q as y,F as M,s as ee,v as Ce,x as Le,y as se,z as F,A as ue,B as he,C as fe,E as ke,G as Be}from"./index.2ea55732.js";var $e={exports:{}};(function(e,t){(function(s,l){e.exports=l()})(We,function(){var s="__v-click-outside",l=typeof window<"u",a=typeof navigator<"u",r=l&&("ontouchstart"in window||a&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],p=function(u){var d=u.event,h=u.handler;(0,u.middleware)(d)&&h(d)},v=function(u,d){var h=function(b){var L=typeof b=="function";if(!L&&typeof b!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:L?b:b.handler,middleware:b.middleware||function(k){return k},events:b.events||r,isActive:b.isActive!==!1,detectIframe:b.detectIframe!==!1,capture:Boolean(b.capture)}}(d.value),E=h.handler,$=h.middleware,D=h.detectIframe,A=h.capture;if(h.isActive){if(u[s]=h.events.map(function(b){return{event:b,srcTarget:document.documentElement,handler:function(L){return function(k){var c=k.el,o=k.event,w=k.handler,i=k.middleware,x=o.path||o.composedPath&&o.composedPath();(x?x.indexOf(c)<0:!c.contains(o.target))&&p({event:o,handler:w,middleware:i})}({el:u,event:L,handler:E,middleware:$})},capture:A}}),D){var ie={event:"blur",srcTarget:window,handler:function(b){return function(L){var k=L.el,c=L.event,o=L.handler,w=L.middleware;setTimeout(function(){var i=document.activeElement;i&&i.tagName==="IFRAME"&&!k.contains(i)&&p({event:c,handler:o,middleware:w})},0)}({el:u,event:b,handler:E,middleware:$})},capture:A};u[s]=[].concat(u[s],[ie])}u[s].forEach(function(b){var L=b.event,k=b.srcTarget,c=b.handler;return setTimeout(function(){u[s]&&k.addEventListener(L,c,A)},0)})}},S=function(u){(u[s]||[]).forEach(function(d){return d.srcTarget.removeEventListener(d.event,d.handler,d.capture)}),delete u[s]},C=l?{beforeMount:v,updated:function(u,d){var h=d.value,E=d.oldValue;JSON.stringify(h)!==JSON.stringify(E)&&(S(u),v(u,{value:h}))},unmounted:S}:{};return{install:function(u){u.directive("click-outside",C)},directive:C}})})($e);const me=$e.exports,ze={class:"dropdown-trigger"},Ge={class:"button is-info","aria-haspopup":"true","aria-controls":"dropdown-menu"},Ye={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},qe={class:"dropdown-content"},Xe=U({__name:"Dropdown",props:{label:{}},setup(e){const t=me.directive,s=V(!1);function l(){s.value=!s.value}function a(){s.value=!1}return(r,p)=>pe((_(),f("div",{class:Z(["dropdown",{"is-active":s.value}]),onClick:l},[n("div",ze,[n("button",Ge,[n("span",null,m(r.label),1)])]),n("div",Ye,[n("div",qe,[Fe(r.$slots,"default")])])],2)),[[W(t),a]])}}),je={},Qe={href:"https://ko-fi.com/U7U6I19EU",target:"_blank"},Ke=n("img",{height:"36",style:{border:"0px",height:"36px"},src:"https://storage.ko-fi.com/cdn/kofi4.png?v=3",border:"0",alt:"Buy Me a Coffee at ko-fi.com"},null,-1),He=[Ke];function Je(e,t){return _(),f("a",Qe,He)}const Ze=ne(je,[["render",Je]]);var R=(e=>(e[e.LOTTERY=1]="LOTTERY",e[e.FREE_COMPANY=2]="FREE_COMPANY",e[e.INDIVIDUAL=4]="INDIVIDUAL",e))(R||{}),B=(e=>(e[e.ENTRY=1]="ENTRY",e[e.RESULTS=2]="RESULTS",e[e.UNAVAILABLE=3]="UNAVAILABLE",e))(B||{}),j=(e=>(e[e.SMALL=0]="SMALL",e[e.MEDIUM=1]="MEDIUM",e[e.LARGE=2]="LARGE",e))(j||{});function Q(e){return(e.purchase_system&1)===1}function z(e){var s;const t=+new Date/1e3;return Q(e)&&((s=e.lotto_phase_until)!=null?s:0)<t}function et(e){return Q(e)&&!z(e)&&e.lotto_phase===B.ENTRY}function te(e){return Q(e)&&(e.lotto_phase===null||z(e))}function we(e){return!Q(e)||te(e)}function tt(e){var t,s;return Q(e)?e.lotto_phase===null||z(e)?"Missing Placard Data":(s=(t=e.lotto_entries)==null?void 0:t.toString())!=null?s:"0":"N/A"}function nt(e){if(Q(e)){if(e.lotto_phase===null||z(e))return"Missing Placard Data"}else return"FCFS";switch(e.lotto_phase){case B.ENTRY:return"Accepting Entries";case B.RESULTS:return"Results";case B.UNAVAILABLE:return"Unavailable";default:return`Unknown (${e.lotto_phase})`}}function Ae(e){switch(e){case j.SMALL:return"Small";case j.MEDIUM:return"Medium";case j.LARGE:return"Large";default:return`Unknown (${e})`}}function Pe(e){return(e&(R.FREE_COMPANY|R.INDIVIDUAL))==(R.FREE_COMPANY|R.INDIVIDUAL)?"Unrestricted":e&R.FREE_COMPANY?"Free Company":"Individual"}function _e(e){var s;return(s=T.fromSeconds(e).toRelative())!=null?s:"Unknown"}const st={339:"Mist",340:"The Lavender Beds",341:"The Goblet",641:"Shirogane",979:"Empyreum"};class ot{constructor(){N(this,"plotStates",new Map);N(this,"worlds",[]);N(this,"ws",null);N(this,"worldsLoaded",new Set);N(this,"worldMap",new Map);N(this,"districtNames",new Map);N(this,"isWSConnecting",!1);N(this,"isWSDisconnected",!1);N(this,"eventListeners",[])}get isDisconnected(){return this.isWSDisconnected&&!this.isWSConnecting}init(){var t;(t=this.ws)==null||t.close(1e3),this.isWSConnecting=!0,this.ws=new WebSocket(Ue),this.ws.addEventListener("open",()=>this.onWSOpen()),this.ws.addEventListener("close",s=>this.onWSClose(s)),this.ws.addEventListener("error",s=>console.warn("WebSocket error: ",s)),this.ws.addEventListener("message",s=>this.onRawMessage(s.data))}close(){var t;(t=this.ws)==null||t.close(1e3),this.worldsLoaded.clear()}async getWorlds(){try{const t=await ve.get(`${ge}/worlds`);this.worlds=t.data;for(const s of t.data)this.worldMap.set(s.id,s);console.debug(`Loaded ${this.worlds.length} world defs.`)}catch(t){console.error("Failed to get world list:",t)}}async loadWorld(t,s=!1){if(console.debug(`Loading data for world ${t}...`),this.worldsLoaded.has(t)&&!s){console.debug(`World ID ${t} has been loaded - skipping loadWorld.`);return}this.worldsLoaded.add(t);let l;try{l=await ve.get(`${ge}/worlds/${t}`)}catch(r){console.error("Failed to get world details:",r);return}const a=l.data;console.debug(`Got world detail for ${a.name} - ${a.num_open_plots} plots open.`);for(const r of a.districts){this.districtNames.set(r.id,r.name);for(const p of r.open_plots)this.plotStates.set(le(p),p)}}onRawMessage(t){let s;try{s=JSON.parse(t),console.debug("RECV",s)}catch(l){console.warn(l);return}switch(s.type){case"plot_open":this.onPlotOpen(s.data);break;case"plot_update":this.onPlotUpdate(s.data);break;case"plot_sold":this.onPlotSold(s.data);break}this.eventListeners.forEach(l=>l(s))}onPlotOpen(t){this.plotStates.set(le(t),t)}onPlotUpdate(t){this.plotStates.set(le(t),t)}onPlotSold(t){this.plotStates.delete(le(t))}onWSOpen(){console.log("WS connected"),this.isWSDisconnected=!1,this.isWSConnecting=!1}onWSClose(t){console.log(`WS closed with ${t.code} (reason=${t.reason}; clean=${t.wasClean})`),this.isWSDisconnected=!0,t.wasClean&&t.code!==1012?this.isWSConnecting=!1:this.isWSConnecting||this.attemptReconnect(1)}attemptReconnect(t,s=5){if(!!this.isWSDisconnected){if(t>s){this.isWSDisconnected=!0,this.isWSConnecting=!1;return}console.log(`Attempting to reconnect (try ${t} of ${s})...`),this.init(),setTimeout(()=>this.attemptReconnect(t+1,s),t*1e3+Math.random()*1e3)}}addEventListener(t){this.eventListeners.push(t)}removeEventListener(t){const s=this.eventListeners.indexOf(t);s!=-1&&this.eventListeners.splice(s,1)}worldName(t){var s,l;return(l=(s=this.worldMap.get(t))==null?void 0:s.name)!=null?l:t.toString()}districtName(t){var s,l;return(l=(s=this.districtNames.get(t))!=null?s:st[t])!=null?l:t.toString()}nextOrLatestPhaseChange(){var a;const t=+new Date/1e3,s=Array.from(this.plotStates.values()).map(r=>{var p;return(p=r.lotto_phase_until)!=null?p:0}).sort((r,p)=>r-p),l=s.find(r=>r>t);return l||((a=s[s.length-1])!=null?a:0)}}function le(e){return`${e.world_id}-${e.district_id}-${e.ward_number}-${e.plot_number}`}const it=U({__name:"FlashOnChange",props:{value:{}},setup(e){return(t,s)=>(_(),J(Re,{mode:"out-in"},{default:Ee(()=>[(_(),f("span",{key:t.value},m(t.value),1))]),_:1}))}});const q=ne(it,[["__scopeId","data-v-34a89928"]]),ae=U({__name:"TimeDisplay",props:{time:{},format:{}},setup(e){const t=e,s=V(T.fromSeconds(t.time)),l=X(()=>{switch(t.format){case"date":return s.value.toLocaleString(T.DATE_SHORT);case"dateDay":return s.value.toLocaleString(T.DATE_FULL);case"time":return s.value.toLocaleString(T.TIME_SIMPLE);case"timeSecs":return s.value.toLocaleString(T.TIME_WITH_SECONDS);case"datetime":return`${s.value.toLocaleString(T.DATE_FULL)} ${s.value.toLocaleString(T.TIME_SIMPLE)}`;case"datetimeWeekday":return`${s.value.toLocaleString(T.DATE_HUGE)} ${s.value.toLocaleString(T.TIME_SIMPLE)}`;case"relative":return s.value.toRelative();default:return s.value.toSeconds().toString()}});return ce(()=>setInterval(()=>{var r;const a=Ve();(r=a==null?void 0:a.proxy)==null||r.$forceUpdate()},1e3)),(a,r)=>m(l.value)}}),lt={class:"dropdown-trigger"},at={class:"icon m-0 is-clickable","aria-haspopup":"true","aria-controls":"dropdown-menu"},rt={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},ct={class:"dropdown-content"},dt={class:"checkbox"},ut=["checked","onChange"],re=U({__name:"FilterIcon",props:{options:{},selected:{}},emits:["selectionChanged"],setup(e,{emit:t}){const s=e,l=me.directive,a=V(!1);function r(S,C){const u=new Set(s.selected);S.currentTarget.checked?u.add(C):u.delete(C),t("selectionChanged",Array.from(u))}function p(){a.value=!0}function v(){a.value=!1}return(S,C)=>{const u=de("font-awesome-icon");return pe((_(),f("div",{class:Z(["dropdown",{"is-active":a.value}]),onClick:p},[n("div",lt,[n("span",at,[g(u,{icon:["fas","filter"]}),y(" "+m(S.selected.length?S.selected.length:null),1)])]),n("div",rt,[n("div",ct,[(_(!0),f(M,null,ee(S.options,d=>(_(),f("div",{class:"dropdown-item",key:d.value},[n("label",dt,[n("input",{type:"checkbox",checked:S.selected.includes(d.value),onChange:h=>r(h,d.value)},null,40,ut),y(" "+m(d.label),1)])]))),128))])])],2)),[[W(l),v]])}}}),_t={class:"dropdown-trigger"},pt={class:"icon m-0 is-clickable","aria-haspopup":"true","aria-controls":"dropdown-menu"},ht={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},ft={class:"dropdown-content"},mt={class:"dropdown-item"},vt={class:"grid-container"},gt=["onClick"],wt=U({__name:"FilterIconGrid",props:{options:{},selected:{}},emits:["selectionChanged"],setup(e,{emit:t}){const s=e,l=me.directive,a=V(!1);function r(S,C){const u=new Set(s.selected);u.has(C)?u.delete(C):u.add(C),t("selectionChanged",Array.from(u))}function p(){a.value=!0}function v(){a.value=!1}return(S,C)=>{const u=de("font-awesome-icon");return pe((_(),f("div",{class:Z(["dropdown",{"is-active":a.value}]),onClick:p},[n("div",_t,[n("span",pt,[g(u,{icon:["fas","filter"]}),y(" "+m(S.selected.length?S.selected.length:null),1)])]),n("div",ht,[n("div",ft,[n("div",mt,[n("div",vt,[(_(!0),f(M,null,ee(S.options,d=>(_(),f("button",{class:Z(["grid-button button mr-1 mb-1",{"is-primary":S.selected.includes(d.value)}]),onClick:h=>r(h,d.value)},m(d.label),11,gt))),256))])])])])],2)),[[W(l),v]])}}});const Se=ne(wt,[["__scopeId","data-v-c51fd7ea"]]),St=30,yt=60,O={districts:{options:[{label:"Mist",value:339},{label:"The Lavender Beds",value:340},{label:"The Goblet",value:341},{label:"Shirogane",value:641},{label:"Empyreum",value:979}],strategy(e){return t=>e.includes(t.district_id)}},wards:{options:ye(St),strategy(e){return t=>e.includes(t.ward_number)}},plots:{options:ye(yt),strategy(e){return t=>e.includes(t.plot_number)}},sizes:{options:[{label:"Small",value:j.SMALL},{label:"Medium",value:j.MEDIUM},{label:"Large",value:j.LARGE}],strategy(e){return t=>e.includes(t.size)}},phases:{options:[{label:"Accepting Entries",value:B.ENTRY},{label:"Results",value:B.RESULTS},{label:"Unavailable",value:B.UNAVAILABLE},{label:"FCFS",value:-2},{label:"Missing/Outdated",value:-1}],strategy(e){return t=>{if(Q(t)){if(te(t))return e.includes(-1)}else return e.includes(-2);return e.includes(t.lotto_phase)}}},tenants:{options:[{label:"Free Company",value:R.FREE_COMPANY},{label:"Individual",value:R.INDIVIDUAL}],strategy(e){const t=e.reduce((s,l)=>s|l);return s=>(s.purchase_system&t)!==0}}};function ye(e){return[...Array(e).keys()].map(t=>({label:`${t+1}`,value:t}))}const oe=e=>(t,s)=>-e(t,s);var P=(e=>(e[e.NONE=0]="NONE",e[e.ASC=1]="ASC",e[e.DESC=2]="DESC",e))(P||{});const bt=(e,t)=>e.district_id-t.district_id||e.ward_number-t.ward_number||e.plot_number-t.plot_number,Ie=(e,t)=>e.size-t.size,Et=oe(Ie),De=(e,t)=>e.price-t.price,Ct=oe(De),Lt=(e,t)=>{var a,r;const s=z(e)||e.lotto_phase===null?Number.MAX_VALUE:(a=e.lotto_entries)!=null?a:0,l=z(t)||t.lotto_phase===null?Number.MAX_VALUE:(r=t.lotto_entries)!=null?r:0;return s-l},kt=(e,t)=>{var a,r;const s=z(e)||e.lotto_phase===null?Number.MIN_SAFE_INTEGER:(a=e.lotto_entries)!=null?a:0;return(z(t)||t.lotto_phase===null?Number.MIN_SAFE_INTEGER:(r=t.lotto_entries)!=null?r:0)-s},Ne=(e,t)=>{const s=te(e)?Number.MAX_VALUE:e.lotto_phase,l=te(t)?Number.MAX_VALUE:t.lotto_phase;return s-l},$t=oe(Ne),Te=(e,t)=>t.last_updated_time-e.last_updated_time,At=oe(Te),Me=(e,t)=>t.first_seen_time-e.first_seen_time,Pt=oe(Me),be={size:{asc:Ie,desc:Et},price:{asc:De,desc:Ct},entries:{asc:Lt,desc:kt},phase:{asc:Ne,desc:$t},updateTime:{asc:Te,desc:At},firstSeen:{asc:Me,desc:Pt}},H=U({__name:"SortIcon",props:{index:{},direction:{},disallowSortDesc:{type:Boolean}},emits:["directionChanged"],setup(e,{emit:t}){const s=e;function l(){s.direction===P.NONE?t("directionChanged",P.ASC):s.direction===P.ASC?s.disallowSortDesc?t("directionChanged",P.NONE):t("directionChanged",P.DESC):t("directionChanged",P.NONE)}return(a,r)=>{const p=de("font-awesome-icon");return _(),f("span",{class:"icon m-0 is-clickable",onClick:l},[a.direction===0?(_(),J(p,{key:0,icon:["fas","sort"]})):a.direction===1?(_(),J(p,{key:1,icon:["fas","sort-up"]})):(_(),J(p,{key:2,icon:["fas","sort-down"]})),y(" "+m(a.index!==null?a.index+1:null),1)])}}}),I=e=>(he("data-v-0f3eff70"),e=e(),fe(),e),It={key:0},Dt=I(()=>n("a",{href:"https://github.com/zhudotexe/FFXIV_PaissaHouse#lottery-sweeps",target:"_blank"}," PaissaHouse XIVLauncher plugin ",-1)),Nt={class:"level mt-2"},Tt={class:"level-left"},Mt={key:0,class:"level-item"},xt={key:1,class:"level-item"},Ot={key:2,class:"level-item"},Wt={class:"level-right"},Ft={class:"level-item"},Ut={class:"level-item"},Rt={class:"table-container mt-4"},Vt={class:"table is-striped is-fullwidth is-hoverable"},Bt={class:"icon-text"},zt=I(()=>n("span",null,"District",-1)),Gt={class:"icon-text"},Yt=I(()=>n("span",null,"Ward",-1)),qt={class:"icon-text"},Xt=I(()=>n("span",null,"Plot",-1)),jt={class:"icon-text"},Qt=I(()=>n("span",null,"Size",-1)),Kt={class:"icon-text"},Ht=I(()=>n("span",null,"Price",-1)),Jt={class:"icon-text"},Zt=I(()=>n("span",null,"Entries",-1)),en={class:"icon-text"},tn=I(()=>n("span",null,"Lottery Phase",-1)),nn={class:"icon-text"},sn=I(()=>n("span",null,"Allowed Tenants",-1)),on={class:"icon-text"},ln=I(()=>n("span",null,"Last Updated",-1)),an={class:"icon-text"},rn=I(()=>n("span",null,"First Seen",-1)),cn={key:0,class:"level"},dn={class:"level-item"},un={class:"icon is-small"},_n={class:"icon is-small"},pn=U({__name:"WorldView",props:{client:{},worldId:{}},setup(e){const t=e,s=Ce(),l=Le(),a=se({currentPage:0,numPerPage:50}),r=se(new Map),p=se(new Map),v=X(()=>Array.from(t.client.plotStates.values()).filter(o=>o.world_id===t.worldId)),S=X(()=>{let c=[...v.value];for(const[o,w]of r){const i=O[o];!i||(c=c.filter(i.strategy(Array.from(w))))}return c.sort((o,w)=>{for(const[i,x]of p){const Y=be[i];if(!Y)continue;let K=0;if(x===P.ASC?K=Y.asc(o,w):x===P.DESC&&Y.desc&&(K=Y.desc(o,w)),K)return K}return bt(o,w)})}),C=X(()=>S.value.slice(a.currentPage*a.numPerPage,(a.currentPage+1)*a.numPerPage)),u=X(()=>Math.ceil(S.value.length/a.numPerPage));function d(c){const o=r.get(c);return o!==void 0?Array.from(o):[]}function h(c,o){o.length?r.set(c,new Set(o)):r.delete(c),A()}function E(c){const o=Array.from(p.keys()).indexOf(c);return o===-1?null:o}function $(c){var o;return(o=p.get(c))!=null?o:P.NONE}function D(c,o){o===P.NONE?p.delete(c):p.set(c,o),A()}function A(){const c={...l.query,sort:L()};for(const o of Object.keys(O)){const w=r.get(o);w?c[o]=Array.from(w):c[o]=void 0}s.replace({query:c})}function ie(){for(const[c,o]of Object.entries(O)){let w=l.query[c];if(!w)continue;ue.exports.isArray(w)||(w=[w]);let i=[];for(const x of w){const Y=o.options.find(K=>K.value===+(x!=null?x:0));Y&&i.push(Y.value)}i.length&&r.set(c,new Set(i))}}function b(){let c=l.query.sort;if(!!c){ue.exports.isArray(c)||(c=[c]);for(const o of c){if(!o)continue;const[w,i]=o.split(":",2);!(be[w]&&(+i==1||+i==2))||p.set(w,+i)}}}function L(){const c=[];for(const[o,w]of p)c.push(`${o}:${w}`);return c}function k(){r.clear(),p.clear(),A()}return ce(()=>{ie(),b()}),(c,o)=>{const w=de("font-awesome-icon");return _(),f(M,null,[n("p",null,[y(m(c.client.worldName(c.worldId))+" has ",1),g(q,{value:v.value.length},null,8,["value"]),y(" open plots, at least "),g(q,{value:v.value.filter(et).length},null,8,["value"]),y(" of which are available for bidding. ")]),v.value.filter(te).length?(_(),f("p",It,[n("strong",null,[g(q,{value:v.value.filter(te).length},null,8,["value"])]),y(" plots have missing or outdated lottery data. You can contribute by installing the "),Dt,y(" and clicking on the placard of any outdated plot in-game. This site will update in real time! ")])):F("",!0),n("div",Nt,[n("div",Tt,[c.client.nextOrLatestPhaseChange()>+new Date/1e3?(_(),f("p",Mt,[y(" The current lottery phase ends at "),g(ae,{time:c.client.nextOrLatestPhaseChange(),format:"datetimeWeekday"},null,8,["time"]),y(" ( "),g(ae,{time:c.client.nextOrLatestPhaseChange(),format:"relative"},null,8,["time"]),y(" ). ")])):c.client.nextOrLatestPhaseChange()>0?(_(),f("p",xt,[y(" The previous lottery phase ended at "),g(ae,{time:c.client.nextOrLatestPhaseChange(),format:"datetimeWeekday"},null,8,["time"]),y(" ( "),g(ae,{time:c.client.nextOrLatestPhaseChange(),format:"relative"},null,8,["time"]),y(" ). ")])):(_(),f("p",Ot,"There is insufficient data to calculate when the next lottery phase ends."))]),n("div",Wt,[n("p",Ft,m(S.value.length)+" "+m(S.value.length===1?"plot matches":"plots match")+" your current filters. ",1),n("p",Ut,[n("button",{class:"button",onClick:o[0]||(o[0]=i=>k())},"Clear Sort & Filters")])])]),n("div",Rt,[n("table",Vt,[n("thead",null,[n("tr",null,[n("th",null,[n("span",Bt,[zt,g(re,{class:"ml-1",options:W(O).districts.options,selected:d("districts"),onSelectionChanged:o[1]||(o[1]=i=>h("districts",i))},null,8,["options","selected"])])]),n("th",null,[n("span",Gt,[Yt,g(Se,{class:"ml-1",options:W(O).wards.options,selected:d("wards"),onSelectionChanged:o[2]||(o[2]=i=>h("wards",i))},null,8,["options","selected"])])]),n("th",null,[n("span",qt,[Xt,g(Se,{class:"ml-1",options:W(O).plots.options,selected:d("plots"),onSelectionChanged:o[3]||(o[3]=i=>h("plots",i))},null,8,["options","selected"])])]),n("th",null,[n("span",jt,[Qt,g(H,{class:"ml-1",index:E("size"),direction:$("size"),onDirectionChanged:o[4]||(o[4]=i=>D("size",i))},null,8,["index","direction"]),g(re,{options:W(O).sizes.options,selected:d("sizes"),onSelectionChanged:o[5]||(o[5]=i=>h("sizes",i))},null,8,["options","selected"])])]),n("th",null,[n("span",Kt,[Ht,g(H,{class:"ml-1",index:E("price"),direction:$("price"),onDirectionChanged:o[6]||(o[6]=i=>D("price",i))},null,8,["index","direction"])])]),n("th",null,[n("span",Jt,[Zt,g(H,{class:"ml-1",index:E("entries"),direction:$("entries"),onDirectionChanged:o[7]||(o[7]=i=>D("entries",i))},null,8,["index","direction"])])]),n("th",null,[n("span",en,[tn,g(H,{class:"ml-1",index:E("phase"),direction:$("phase"),onDirectionChanged:o[8]||(o[8]=i=>D("phase",i))},null,8,["index","direction"]),g(re,{options:W(O).phases.options,selected:d("phases"),onSelectionChanged:o[9]||(o[9]=i=>h("phases",i))},null,8,["options","selected"])])]),n("th",null,[n("span",nn,[sn,g(re,{class:"ml-1",options:W(O).tenants.options,selected:d("tenants"),onSelectionChanged:o[10]||(o[10]=i=>h("tenants",i))},null,8,["options","selected"])])]),n("th",null,[n("span",on,[ln,g(H,{class:"ml-1",index:E("updateTime"),direction:$("updateTime"),onDirectionChanged:o[11]||(o[11]=i=>D("updateTime",i))},null,8,["index","direction"])])]),n("th",null,[n("span",an,[rn,g(H,{class:"ml-1",index:E("firstSeen"),direction:$("firstSeen"),onDirectionChanged:o[12]||(o[12]=i=>D("firstSeen",i))},null,8,["index","direction"])])])])]),n("tbody",null,[(_(!0),f(M,null,ee(C.value,i=>(_(),f("tr",{key:[i.world_id,i.district_id,i.ward_number,i.plot_number].toString()},[n("td",null,m(c.client.districtName(i.district_id)),1),n("td",null,"Ward "+m(i.ward_number+1),1),n("td",null,"Plot "+m(i.plot_number+1),1),n("td",null,m(Ae(i.size)),1),n("td",null,m(i.price.toLocaleString()),1),n("td",null,[g(q,{value:tt(i),class:Z({"is-italic":we(i)})},null,8,["value","class"])]),n("td",null,[g(q,{value:nt(i),class:Z({"is-italic":we(i)})},null,8,["value","class"])]),n("td",null,m(Pe(i.purchase_system)),1),n("td",null,[g(q,{value:_e(i.last_updated_time)},null,8,["value"])]),n("td",null,m(_e(i.first_seen_time)),1)]))),128))])]),u.value>1?(_(),f("div",cn,[n("p",dn,[a.currentPage>0?(_(),f("button",{key:0,class:"button mr-2",onClick:o[13]||(o[13]=i=>a.currentPage--)},[n("span",un,[g(w,{icon:["fas","angle-left"]})])])):F("",!0),n("span",null,"Page "+m(a.currentPage+1)+" / "+m(u.value),1),a.currentPage<u.value-1?(_(),f("button",{key:1,class:"button ml-2",onClick:o[14]||(o[14]=i=>a.currentPage++)},[n("span",_n,[g(w,{icon:["fas","angle-right"]})])])):F("",!0)])])):F("",!0)])],64)}}});const hn=ne(pn,[["__scopeId","data-v-0f3eff70"]]),fn=e=>(he("data-v-e1a5c8b8"),e=e(),fe(),e),mn={class:"table-container mt-4"},vn={class:"table is-striped is-fullwidth is-hoverable"},gn=fn(()=>n("thead",null,[n("tr",null,[n("th",null,"Event"),n("th",null,"World"),n("th",null,"District"),n("th",null,"Ward"),n("th",null,"Plot"),n("th",null,"Size"),n("th",null,"Allowed Tenants"),n("th",null,"Timestamp")])],-1)),wn=U({__name:"EventLog",props:{client:{}},setup(e){const t=e,s=se([]);function l(r){s.push(r)}const a=X(()=>[...s].reverse());return ce(()=>{t.client.addEventListener(l)}),ke(()=>{t.client.removeEventListener(l)}),(r,p)=>(_(),f(M,null,[n("p",null,[y(" Since loading the page, there have been "),g(q,{value:s.length},null,8,["value"]),y(" events. ")]),n("div",mn,[n("table",vn,[gn,n("tbody",null,[(_(!0),f(M,null,ee(a.value,v=>(_(),f("tr",{key:[v.data.world_id,v.data.district_id,v.data.ward_number,v.data.plot_number].toString()},[n("td",null,m(v.type.toUpperCase()),1),n("td",null,m(r.client.worldName(v.data.world_id)),1),n("td",null,m(r.client.districtName(v.data.district_id)),1),n("td",null,"Ward "+m(v.data.ward_number+1),1),n("td",null,"Plot "+m(v.data.plot_number+1),1),n("td",null,m(Ae(v.data.size)),1),n("td",null,m(Pe(v.data.purchase_system)),1),n("td",null,m(_e(v.data.last_updated_time)),1)]))),128))])])])],64))}});const Sn=ne(wn,[["__scopeId","data-v-e1a5c8b8"]]),G=e=>(he("data-v-ad1dea0d"),e=e(),fe(),e),yn={class:"section"},bn={class:"container"},En={class:"title"},Cn=G(()=>n("img",{src:Be,alt:"PaissaHouse Logo",class:"paissa-logo"},null,-1)),Ln=[Cn],kn=G(()=>n("h5",{class:"subtitle"},[y(" A list of houses for sale in Final Fantasy XIV, how many lottery bids are on each, and where to contribute using the "),n("a",{href:"https://github.com/zhudotexe/FFXIV_PaissaHouse",target:"_blank"},"PaissaHouse XIVLauncher plugin"),y(". ")],-1)),$n={key:0,class:"notification is-warning"},An=G(()=>n("h4",{class:"title is-4 mt-4"},"Select a World",-1)),Pn=G(()=>n("h6",{class:"subtitle is-6"},"Select a world to view the houses available on the world.",-1)),In={key:1,class:"buttons"},Dn=["onClick"],Nn={key:2},Tn=G(()=>n("span",{class:"loader is-inline-block"},null,-1)),Mn={class:"title is-4 mt-4"},xn={key:0,class:"loader is-inline-block"},On=G(()=>n("h4",{class:"title is-4 mt-4"},"Live Events",-1)),Wn=G(()=>n("hr",null,null,-1)),Fn=G(()=>n("p",{class:"mb-2"},"Enjoy the site? Consider tipping to help me keep the servers alive!",-1)),Un=U({__name:"PaissaViewer",setup(e){const t=Ce(),s=Le(),l=se(new ot),a=V(!0),r=V(null),p=V(!1),v=V(!1),S=X(()=>{let d=l.worlds;return d.sort((h,E)=>h.datacenter_name.localeCompare(E.datacenter_name)||h.name.localeCompare(E.name)),Object.entries(ue.exports.groupBy(d,h=>h.datacenter_name))});async function C(d){await t.replace({query:{...s.query,world:d.id}}),await u(d.id)}async function u(d){r.value=d,p.value=!0,await l.loadWorld(d),p.value=!1}return ce(async()=>{l.init(),await l.getWorlds(),a.value=!1;const d=s.query.world;if(d){const h=+d;l.worldMap.has(h)&&await u(h)}}),ke(()=>l.close()),(d,h)=>(_(),f("section",yn,[n("div",bn,[n("h3",En,[n("a",{onClick:h[0]||(h[0]=E=>v.value=!v.value)},Ln),y(" PaissaDB ")]),kn,l.isDisconnected?(_(),f("div",$n," Disconnected from the server! Please refresh the page to stay up-to-date with the latest data. ")):F("",!0),An,Pn,a.value?(_(),f("div",Nn,[Tn,y(" Loading worlds...")])):(_(),f("div",In,[(_(!0),f(M,null,ee(S.value,([E,$],D)=>(_(),J(Xe,{class:"mr-2",key:D,label:E},{default:Ee(()=>[(_(!0),f(M,null,ee($,A=>(_(),f("a",{class:"dropdown-item",key:A.id,onClick:ie=>C(A)},m(A.name),9,Dn))),128))]),_:2},1032,["label"]))),128))])),r.value?(_(),f(M,{key:3},[n("h4",Mn,[y(m(l.worldName(r.value))+" ",1),p.value?(_(),f("span",xn)):F("",!0)]),p.value?F("",!0):(_(),J(hn,{key:0,client:l,"world-id":r.value},null,8,["client","world-id"]))],64)):F("",!0),v.value?(_(),f(M,{key:4},[On,g(Sn,{client:l},null,8,["client"])],64)):F("",!0),Wn,Fn,g(Ze)])]))}});const Bn=ne(Un,[["__scopeId","data-v-ad1dea0d"]]);export{Bn as default};
