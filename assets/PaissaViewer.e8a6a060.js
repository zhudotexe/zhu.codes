var Ne=Object.defineProperty;var Me=(e,t,n)=>t in e?Ne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var M=(e,t,n)=>(Me(e,typeof t!="symbol"?t+"":t,n),n);import{c as Te,d as V,r as z,w as ue,u as x,o as p,a as h,b as s,t as w,e as xe,n as Z,_ as ne,P as Oe,f as he,g as fe,h as J,i as ye,T as We,D as I,j as H,k as pe,l as Fe,m as re,p as m,q as S,F as Y,s as te,v as be,x as Ce,y as le,z as F,A as de,B as Ee,C as ke,E as Ue,G as Re}from"./index.c2f42033.js";var Le={exports:{}};(function(e,t){(function(n,c){e.exports=c()})(Te,function(){var n="__v-click-outside",c=typeof window<"u",r=typeof navigator<"u",d=c&&("ontouchstart"in window||r&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],_=function(a){var u=a.event,f=a.handler;(0,a.middleware)(u)&&f(u)},C=function(a,u){var f=function(y){var k=typeof y=="function";if(!k&&typeof y!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:k?y:y.handler,middleware:y.middleware||function($){return $},events:y.events||d,isActive:y.isActive!==!1,detectIframe:y.detectIframe!==!1,capture:Boolean(y.capture)}}(u.value),E=f.handler,A=f.middleware,L=f.detectIframe,O=f.capture;if(f.isActive){if(a[n]=f.events.map(function(y){return{event:y,srcTarget:document.documentElement,handler:function(k){return function($){var l=$.el,o=$.event,v=$.handler,i=$.middleware,N=o.path||o.composedPath&&o.composedPath();(N?N.indexOf(l)<0:!l.contains(o.target))&&_({event:o,handler:v,middleware:i})}({el:a,event:k,handler:E,middleware:A})},capture:O}}),L){var ce={event:"blur",srcTarget:window,handler:function(y){return function(k){var $=k.el,l=k.event,o=k.handler,v=k.middleware;setTimeout(function(){var i=document.activeElement;i&&i.tagName==="IFRAME"&&!$.contains(i)&&_({event:l,handler:o,middleware:v})},0)}({el:a,event:y,handler:E,middleware:A})},capture:O};a[n]=[].concat(a[n],[ce])}a[n].forEach(function(y){var k=y.event,$=y.srcTarget,l=y.handler;return setTimeout(function(){a[n]&&$.addEventListener(k,l,O)},0)})}},g=function(a){(a[n]||[]).forEach(function(u){return u.srcTarget.removeEventListener(u.event,u.handler,u.capture)}),delete a[n]},b=c?{beforeMount:C,updated:function(a,u){var f=u.value,E=u.oldValue;JSON.stringify(f)!==JSON.stringify(E)&&(g(a),C(a,{value:f}))},unmounted:g}:{};return{install:function(a){a.directive("click-outside",b)},directive:b}})})(Le);const _e=Le.exports,Ve={class:"dropdown-trigger"},Be={class:"button is-info","aria-haspopup":"true","aria-controls":"dropdown-menu"},Ge={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},ze={class:"dropdown-content"},Ye=V({__name:"Dropdown",props:{label:{}},setup(e){const t=_e.directive,n=z(!1);function c(){n.value=!n.value}function r(){n.value=!1}return(d,_)=>ue((p(),h("div",{class:Z(["dropdown",{"is-active":n.value}]),onClick:c},[s("div",Ve,[s("button",Be,[s("span",null,w(d.label),1)])]),s("div",Ge,[s("div",ze,[xe(d.$slots,"default")])])],2)),[[x(t),r]])}}),je={},qe={href:"https://ko-fi.com/U7U6I19EU",target:"_blank"},Xe=s("img",{height:"36",style:{border:"0px",height:"36px"},src:"https://storage.ko-fi.com/cdn/kofi4.png?v=3",border:"0",alt:"Buy Me a Coffee at ko-fi.com"},null,-1),Qe=[Xe];function Ke(e,t){return p(),h("a",qe,Qe)}const He=ne(je,[["render",Ke]]);class Je{constructor(){M(this,"plotStates",new Map);M(this,"worlds",[]);M(this,"ws",null);M(this,"worldsLoaded",new Set);M(this,"worldMap",new Map);M(this,"districtNames",new Map);M(this,"isWSConnecting",!1);M(this,"isWSDisconnected",!1)}get isDisconnected(){return this.isWSDisconnected&&!this.isWSConnecting}init(){var t;(t=this.ws)==null||t.close(1e3),this.isWSConnecting=!0,this.ws=new WebSocket(Oe),this.ws.addEventListener("open",()=>this.onWSOpen()),this.ws.addEventListener("close",n=>this.onWSClose(n)),this.ws.addEventListener("error",n=>console.warn("WebSocket error: ",n)),this.ws.addEventListener("message",n=>this.onRawMessage(n.data))}close(){var t;(t=this.ws)==null||t.close(1e3),this.worldsLoaded.clear()}async getWorlds(){try{const t=await he.get(`${fe}/worlds`);this.worlds=t.data;for(const n of t.data)this.worldMap.set(n.id,n);console.debug(`Loaded ${this.worlds.length} world defs.`)}catch(t){console.error("Failed to get world list:",t)}}async loadWorld(t,n=!1){if(console.debug(`Loading data for world ${t}...`),this.worldsLoaded.has(t)&&!n){console.debug(`World ID ${t} has been loaded - skipping loadWorld.`);return}this.worldsLoaded.add(t);let c;try{c=await he.get(`${fe}/worlds/${t}`)}catch(d){console.error("Failed to get world details:",d);return}const r=c.data;console.debug(`Got world detail for ${r.name} - ${r.num_open_plots} plots open.`);for(const d of r.districts){this.districtNames.set(d.id,d.name);for(const _ of d.open_plots)this.plotStates.set(oe(_),_)}}onRawMessage(t){let n;try{n=JSON.parse(t),console.debug("RECV",n)}catch(c){console.warn(c);return}switch(n.type){case"plot_open":return this.onPlotOpen(n.data);case"plot_update":return this.onPlotUpdate(n.data);case"plot_sold":return this.onPlotSold(n.data)}}onPlotOpen(t){this.plotStates.set(oe(t),t)}onPlotUpdate(t){this.plotStates.set(oe(t),t)}onPlotSold(t){this.plotStates.delete(oe(t))}onWSOpen(){console.log("WS connected"),this.isWSDisconnected=!1,this.isWSConnecting=!1}onWSClose(t){console.log(`WS closed with ${t.code} (reason=${t.reason}; clean=${t.wasClean})`),this.isWSDisconnected=!0,t.wasClean&&t.code!==1012?this.isWSConnecting=!1:this.isWSConnecting||this.attemptReconnect(1)}attemptReconnect(t,n=5){if(!!this.isWSDisconnected){if(t>n){this.isWSDisconnected=!0,this.isWSConnecting=!1;return}console.log(`Attempting to reconnect (try ${t} of ${n})...`),this.init(),setTimeout(()=>this.attemptReconnect(t+1,n),t*1e3+Math.random()*1e3)}}worldName(t){var n,c;return(c=(n=this.worldMap.get(t))==null?void 0:n.name)!=null?c:t.toString()}districtName(t){var n;return(n=this.districtNames.get(t))!=null?n:t.toString()}nextOrLatestPhaseChange(){var r;const t=+new Date/1e3,n=Array.from(this.plotStates.values()).map(d=>{var _;return(_=d.lotto_phase_until)!=null?_:0}).sort((d,_)=>d-_),c=n.find(d=>d>t);return c||((r=n[n.length-1])!=null?r:0)}}function oe(e){return`${e.world_id}-${e.district_id}-${e.ward_number}-${e.plot_number}`}const Ze=V({__name:"FlashOnChange",props:{value:{}},setup(e){return(t,n)=>(p(),J(We,{mode:"out-in"},{default:ye(()=>[(p(),h("span",{key:t.value},w(t.value),1))]),_:1}))}});const Q=ne(Ze,[["__scopeId","data-v-34a89928"]]),ie=V({__name:"TimeDisplay",props:{time:{},format:{}},setup(e){const t=e,n=z(I.fromSeconds(t.time)),c=H(()=>{switch(t.format){case"date":return n.value.toLocaleString(I.DATE_SHORT);case"dateDay":return n.value.toLocaleString(I.DATE_FULL);case"time":return n.value.toLocaleString(I.TIME_SIMPLE);case"timeSecs":return n.value.toLocaleString(I.TIME_WITH_SECONDS);case"datetime":return`${n.value.toLocaleString(I.DATE_FULL)} ${n.value.toLocaleString(I.TIME_SIMPLE)}`;case"datetimeWeekday":return`${n.value.toLocaleString(I.DATE_HUGE)} ${n.value.toLocaleString(I.TIME_SIMPLE)}`;case"relative":return n.value.toRelative();default:return n.value.toSeconds().toString()}});return pe(()=>setInterval(()=>{var d;const r=Fe();(d=r==null?void 0:r.proxy)==null||d.$forceUpdate()},1e3)),(r,d)=>w(c.value)}}),et={class:"dropdown-trigger"},tt={class:"icon m-0 is-clickable","aria-haspopup":"true","aria-controls":"dropdown-menu"},nt={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},st={class:"dropdown-content"},ot={class:"checkbox"},it=["checked","onChange"],ae=V({__name:"FilterIcon",props:{options:{},selected:{}},emits:["selectionChanged"],setup(e,{emit:t}){const n=e,c=_e.directive,r=z(!1);function d(g,b){const a=new Set(n.selected);g.currentTarget.checked?a.add(b):a.delete(b),t("selectionChanged",Array.from(a))}function _(){r.value=!0}function C(){r.value=!1}return(g,b)=>{const a=re("font-awesome-icon");return ue((p(),h("div",{class:Z(["dropdown",{"is-active":r.value}]),onClick:_},[s("div",et,[s("span",tt,[m(a,{icon:["fas","filter"]}),S(" "+w(g.selected.length?g.selected.length:null),1)])]),s("div",nt,[s("div",st,[(p(!0),h(Y,null,te(g.options,u=>(p(),h("div",{class:"dropdown-item",key:u.value},[s("label",ot,[s("input",{type:"checkbox",checked:g.selected.includes(u.value),onChange:f=>d(f,u.value)},null,40,it),S(" "+w(u.label),1)])]))),128))])])],2)),[[x(c),C]])}}}),at={class:"dropdown-trigger"},lt={class:"icon m-0 is-clickable","aria-haspopup":"true","aria-controls":"dropdown-menu"},rt={class:"dropdown-menu",id:"dropdown-menu",role:"menu"},ct={class:"dropdown-content"},dt={class:"dropdown-item"},ut={class:"grid-container"},pt=["onClick"],_t=V({__name:"FilterIconGrid",props:{options:{},selected:{}},emits:["selectionChanged"],setup(e,{emit:t}){const n=e,c=_e.directive,r=z(!1);function d(g,b){const a=new Set(n.selected);a.has(b)?a.delete(b):a.add(b),t("selectionChanged",Array.from(a))}function _(){r.value=!0}function C(){r.value=!1}return(g,b)=>{const a=re("font-awesome-icon");return ue((p(),h("div",{class:Z(["dropdown",{"is-active":r.value}]),onClick:_},[s("div",at,[s("span",lt,[m(a,{icon:["fas","filter"]}),S(" "+w(g.selected.length?g.selected.length:null),1)])]),s("div",rt,[s("div",ct,[s("div",dt,[s("div",ut,[(p(!0),h(Y,null,te(g.options,u=>(p(),h("button",{class:Z(["grid-button button mr-1 mb-1",{"is-primary":g.selected.includes(u.value)}]),onClick:f=>d(f,u.value)},w(u.label),11,pt))),256))])])])])],2)),[[x(c),C]])}}});const me=ne(_t,[["__scopeId","data-v-c51fd7ea"]]);var W=(e=>(e[e.LOTTERY=1]="LOTTERY",e[e.FREE_COMPANY=2]="FREE_COMPANY",e[e.INDIVIDUAL=4]="INDIVIDUAL",e))(W||{}),U=(e=>(e[e.ENTRY=1]="ENTRY",e[e.RESULTS=2]="RESULTS",e[e.UNAVAILABLE=3]="UNAVAILABLE",e))(U||{}),j=(e=>(e[e.SMALL=0]="SMALL",e[e.MEDIUM=1]="MEDIUM",e[e.LARGE=2]="LARGE",e))(j||{});function q(e){return(e.purchase_system&1)===1}function R(e){var n;const t=+new Date/1e3;return q(e)&&((n=e.lotto_phase_until)!=null?n:0)<t}function ht(e){return q(e)&&!R(e)&&e.lotto_phase===U.ENTRY}function ee(e){return q(e)&&(e.lotto_phase===null||R(e))}function ve(e){return!q(e)||ee(e)}function ft(e){var t,n;return q(e)?e.lotto_phase===null||R(e)?"Missing Placard Data":(n=(t=e.lotto_entries)==null?void 0:t.toString())!=null?n:"0":"N/A"}function mt(e){if(q(e)){if(e.lotto_phase===null||R(e))return"Missing Placard Data"}else return"FCFS";switch(e.lotto_phase){case U.ENTRY:return"Accepting Entries";case U.RESULTS:return"Results";case U.UNAVAILABLE:return"Unavailable";default:return`Unknown (${e.lotto_phase})`}}function vt(e){switch(e){case j.SMALL:return"Small";case j.MEDIUM:return"Medium";case j.LARGE:return"Large";default:return`Unknown (${e})`}}function gt(e){return(e&(W.FREE_COMPANY|W.INDIVIDUAL))==(W.FREE_COMPANY|W.INDIVIDUAL)?"Unrestricted":e&W.FREE_COMPANY?"Free Company":"Individual"}function ge(e){var n;return(n=I.fromSeconds(e).toRelative())!=null?n:"Unknown"}const wt=30,St=60,T={districts:{options:[{label:"Mist",value:339},{label:"The Lavender Beds",value:340},{label:"The Goblet",value:341},{label:"Shirogane",value:641},{label:"Empyreum",value:979}],strategy(e){return t=>e.includes(t.district_id)}},wards:{options:we(wt),strategy(e){return t=>e.includes(t.ward_number)}},plots:{options:we(St),strategy(e){return t=>e.includes(t.plot_number)}},sizes:{options:[{label:"Small",value:j.SMALL},{label:"Medium",value:j.MEDIUM},{label:"Large",value:j.LARGE}],strategy(e){return t=>e.includes(t.size)}},phases:{options:[{label:"Accepting Entries",value:U.ENTRY},{label:"Results",value:U.RESULTS},{label:"Unavailable",value:U.UNAVAILABLE},{label:"FCFS",value:-2},{label:"Missing/Outdated",value:-1}],strategy(e){return t=>{if(q(t)){if(ee(t))return e.includes(-1)}else return e.includes(-2);return e.includes(t.lotto_phase)}}},tenants:{options:[{label:"Free Company",value:W.FREE_COMPANY},{label:"Individual",value:W.INDIVIDUAL}],strategy(e){const t=e.reduce((n,c)=>n|c);return n=>(n.purchase_system&t)!==0}}};function we(e){return[...Array(e).keys()].map(t=>({label:`${t+1}`,value:t}))}const se=e=>(t,n)=>-e(t,n);var P=(e=>(e[e.NONE=0]="NONE",e[e.ASC=1]="ASC",e[e.DESC=2]="DESC",e))(P||{});const yt=(e,t)=>e.district_id-t.district_id||e.ward_number-t.ward_number||e.plot_number-t.plot_number,$e=(e,t)=>e.size-t.size,bt=se($e),Ae=(e,t)=>e.price-t.price,Ct=se(Ae),Et=(e,t)=>{var r,d;const n=R(e)||e.lotto_phase===null?Number.MAX_VALUE:(r=e.lotto_entries)!=null?r:0,c=R(t)||t.lotto_phase===null?Number.MAX_VALUE:(d=t.lotto_entries)!=null?d:0;return n-c},kt=(e,t)=>{var r,d;const n=R(e)||e.lotto_phase===null?Number.MIN_SAFE_INTEGER:(r=e.lotto_entries)!=null?r:0;return(R(t)||t.lotto_phase===null?Number.MIN_SAFE_INTEGER:(d=t.lotto_entries)!=null?d:0)-n},Pe=(e,t)=>{const n=ee(e)?Number.MAX_VALUE:e.lotto_phase,c=ee(t)?Number.MAX_VALUE:t.lotto_phase;return n-c},Lt=se(Pe),De=(e,t)=>t.last_updated_time-e.last_updated_time,$t=se(De),Ie=(e,t)=>t.first_seen_time-e.first_seen_time,At=se(Ie),Se={size:{asc:$e,desc:bt},price:{asc:Ae,desc:Ct},entries:{asc:Et,desc:kt},phase:{asc:Pe,desc:Lt},updateTime:{asc:De,desc:$t},firstSeen:{asc:Ie,desc:At}},K=V({__name:"SortIcon",props:{index:{},direction:{},disallowSortDesc:{type:Boolean}},emits:["directionChanged"],setup(e,{emit:t}){const n=e;function c(){n.direction===P.NONE?t("directionChanged",P.ASC):n.direction===P.ASC?n.disallowSortDesc?t("directionChanged",P.NONE):t("directionChanged",P.DESC):t("directionChanged",P.NONE)}return(r,d)=>{const _=re("font-awesome-icon");return p(),h("span",{class:"icon m-0 is-clickable",onClick:c},[r.direction===0?(p(),J(_,{key:0,icon:["fas","sort"]})):r.direction===1?(p(),J(_,{key:1,icon:["fas","sort-up"]})):(p(),J(_,{key:2,icon:["fas","sort-down"]})),S(" "+w(r.index!==null?r.index+1:null),1)])}}}),D=e=>(Ee("data-v-0f3eff70"),e=e(),ke(),e),Pt={key:0},Dt=D(()=>s("a",{href:"https://github.com/zhudotexe/FFXIV_PaissaHouse#lottery-sweeps",target:"_blank"}," PaissaHouse XIVLauncher plugin ",-1)),It={class:"level mt-2"},Nt={class:"level-left"},Mt={key:0,class:"level-item"},Tt={key:1,class:"level-item"},xt={key:2,class:"level-item"},Ot={class:"level-right"},Wt={class:"level-item"},Ft={class:"level-item"},Ut={class:"table-container mt-4"},Rt={class:"table is-striped is-fullwidth is-hoverable"},Vt={class:"icon-text"},Bt=D(()=>s("span",null,"District",-1)),Gt={class:"icon-text"},zt=D(()=>s("span",null,"Ward",-1)),Yt={class:"icon-text"},jt=D(()=>s("span",null,"Plot",-1)),qt={class:"icon-text"},Xt=D(()=>s("span",null,"Size",-1)),Qt={class:"icon-text"},Kt=D(()=>s("span",null,"Price",-1)),Ht={class:"icon-text"},Jt=D(()=>s("span",null,"Entries",-1)),Zt={class:"icon-text"},en=D(()=>s("span",null,"Lottery Phase",-1)),tn={class:"icon-text"},nn=D(()=>s("span",null,"Allowed Tenants",-1)),sn={class:"icon-text"},on=D(()=>s("span",null,"Last Updated",-1)),an={class:"icon-text"},ln=D(()=>s("span",null,"First Seen",-1)),rn={key:0,class:"level"},cn={class:"level-item"},dn={class:"icon is-small"},un={class:"icon is-small"},pn=V({__name:"WorldView",props:{client:{},worldId:{}},setup(e){const t=e,n=be(),c=Ce(),r=le({currentPage:0,numPerPage:50}),d=le(new Map),_=le(new Map),C=H(()=>Array.from(t.client.plotStates.values()).filter(o=>o.world_id===t.worldId)),g=H(()=>{let l=[...C.value];for(const[o,v]of d){const i=T[o];!i||(l=l.filter(i.strategy(Array.from(v))))}return l.sort((o,v)=>{for(const[i,N]of _){const G=Se[i];if(!G)continue;let X=0;if(N===P.ASC?X=G.asc(o,v):N===P.DESC&&G.desc&&(X=G.desc(o,v)),X)return X}return yt(o,v)})}),b=H(()=>g.value.slice(r.currentPage*r.numPerPage,(r.currentPage+1)*r.numPerPage)),a=H(()=>Math.ceil(g.value.length/r.numPerPage));function u(l){const o=d.get(l);return o!==void 0?Array.from(o):[]}function f(l,o){o.length?d.set(l,new Set(o)):d.delete(l),O()}function E(l){const o=Array.from(_.keys()).indexOf(l);return o===-1?null:o}function A(l){var o;return(o=_.get(l))!=null?o:P.NONE}function L(l,o){o===P.NONE?_.delete(l):_.set(l,o),O()}function O(){const l={...c.query,sort:k()};for(const o of Object.keys(T)){const v=d.get(o);v?l[o]=Array.from(v):l[o]=void 0}n.replace({query:l})}function ce(){for(const[l,o]of Object.entries(T)){let v=c.query[l];if(!v)continue;de.exports.isArray(v)||(v=[v]);let i=[];for(const N of v){const G=o.options.find(X=>X.value===+(N!=null?N:0));G&&i.push(G.value)}i.length&&d.set(l,new Set(i))}}function y(){let l=c.query.sort;if(!!l){de.exports.isArray(l)||(l=[l]);for(const o of l){if(!o)continue;const[v,i]=o.split(":",2);!(Se[v]&&(+i==1||+i==2))||_.set(v,+i)}}}function k(){const l=[];for(const[o,v]of _)l.push(`${o}:${v}`);return l}function $(){d.clear(),_.clear(),O()}return pe(()=>{ce(),y()}),(l,o)=>{const v=re("font-awesome-icon");return p(),h(Y,null,[s("p",null,[S(w(l.client.worldName(l.worldId))+" has ",1),m(Q,{value:C.value.length},null,8,["value"]),S(" open plots, at least "),m(Q,{value:C.value.filter(ht).length},null,8,["value"]),S(" of which are available for bidding. ")]),C.value.filter(ee).length?(p(),h("p",Pt,[s("strong",null,[m(Q,{value:C.value.filter(ee).length},null,8,["value"])]),S(" plots have missing or outdated lottery data. You can contribute by installing the "),Dt,S(" and clicking on the placard of any outdated plot in-game. This site will update in real time! ")])):F("",!0),s("div",It,[s("div",Nt,[l.client.nextOrLatestPhaseChange()>+new Date/1e3?(p(),h("p",Mt,[S(" The current lottery phase ends at "),m(ie,{time:l.client.nextOrLatestPhaseChange(),format:"datetimeWeekday"},null,8,["time"]),S(" ( "),m(ie,{time:l.client.nextOrLatestPhaseChange(),format:"relative"},null,8,["time"]),S(" ). ")])):l.client.nextOrLatestPhaseChange()>0?(p(),h("p",Tt,[S(" The previous lottery phase ended at "),m(ie,{time:l.client.nextOrLatestPhaseChange(),format:"datetimeWeekday"},null,8,["time"]),S(" ( "),m(ie,{time:l.client.nextOrLatestPhaseChange(),format:"relative"},null,8,["time"]),S(" ). ")])):(p(),h("p",xt,"There is insufficient data to calculate when the next lottery phase ends."))]),s("div",Ot,[s("p",Wt,w(g.value.length)+" "+w(g.value.length===1?"plot matches":"plots match")+" your current filters. ",1),s("p",Ft,[s("button",{class:"button",onClick:o[0]||(o[0]=i=>$())},"Clear Sort & Filters")])])]),s("div",Ut,[s("table",Rt,[s("thead",null,[s("tr",null,[s("th",null,[s("span",Vt,[Bt,m(ae,{class:"ml-1",options:x(T).districts.options,selected:u("districts"),onSelectionChanged:o[1]||(o[1]=i=>f("districts",i))},null,8,["options","selected"])])]),s("th",null,[s("span",Gt,[zt,m(me,{class:"ml-1",options:x(T).wards.options,selected:u("wards"),onSelectionChanged:o[2]||(o[2]=i=>f("wards",i))},null,8,["options","selected"])])]),s("th",null,[s("span",Yt,[jt,m(me,{class:"ml-1",options:x(T).plots.options,selected:u("plots"),onSelectionChanged:o[3]||(o[3]=i=>f("plots",i))},null,8,["options","selected"])])]),s("th",null,[s("span",qt,[Xt,m(K,{class:"ml-1",index:E("size"),direction:A("size"),onDirectionChanged:o[4]||(o[4]=i=>L("size",i))},null,8,["index","direction"]),m(ae,{options:x(T).sizes.options,selected:u("sizes"),onSelectionChanged:o[5]||(o[5]=i=>f("sizes",i))},null,8,["options","selected"])])]),s("th",null,[s("span",Qt,[Kt,m(K,{class:"ml-1",index:E("price"),direction:A("price"),onDirectionChanged:o[6]||(o[6]=i=>L("price",i))},null,8,["index","direction"])])]),s("th",null,[s("span",Ht,[Jt,m(K,{class:"ml-1",index:E("entries"),direction:A("entries"),onDirectionChanged:o[7]||(o[7]=i=>L("entries",i))},null,8,["index","direction"])])]),s("th",null,[s("span",Zt,[en,m(K,{class:"ml-1",index:E("phase"),direction:A("phase"),onDirectionChanged:o[8]||(o[8]=i=>L("phase",i))},null,8,["index","direction"]),m(ae,{options:x(T).phases.options,selected:u("phases"),onSelectionChanged:o[9]||(o[9]=i=>f("phases",i))},null,8,["options","selected"])])]),s("th",null,[s("span",tn,[nn,m(ae,{class:"ml-1",options:x(T).tenants.options,selected:u("tenants"),onSelectionChanged:o[10]||(o[10]=i=>f("tenants",i))},null,8,["options","selected"])])]),s("th",null,[s("span",sn,[on,m(K,{class:"ml-1",index:E("updateTime"),direction:A("updateTime"),onDirectionChanged:o[11]||(o[11]=i=>L("updateTime",i))},null,8,["index","direction"])])]),s("th",null,[s("span",an,[ln,m(K,{class:"ml-1",index:E("firstSeen"),direction:A("firstSeen"),onDirectionChanged:o[12]||(o[12]=i=>L("firstSeen",i))},null,8,["index","direction"])])])])]),s("tbody",null,[(p(!0),h(Y,null,te(b.value,i=>(p(),h("tr",{key:[i.world_id,i.district_id,i.ward_number,i.plot_number].toString()},[s("td",null,w(l.client.districtName(i.district_id)),1),s("td",null,"Ward "+w(i.ward_number+1),1),s("td",null,"Plot "+w(i.plot_number+1),1),s("td",null,w(vt(i.size)),1),s("td",null,w(i.price.toLocaleString()),1),s("td",null,[m(Q,{value:ft(i),class:Z({"is-italic":ve(i)})},null,8,["value","class"])]),s("td",null,[m(Q,{value:mt(i),class:Z({"is-italic":ve(i)})},null,8,["value","class"])]),s("td",null,w(gt(i.purchase_system)),1),s("td",null,[m(Q,{value:ge(i.last_updated_time)},null,8,["value"])]),s("td",null,w(ge(i.first_seen_time)),1)]))),128))])]),a.value>1?(p(),h("div",rn,[s("p",cn,[r.currentPage>0?(p(),h("button",{key:0,class:"button mr-2",onClick:o[13]||(o[13]=i=>r.currentPage--)},[s("span",dn,[m(v,{icon:["fas","angle-left"]})])])):F("",!0),s("span",null,"Page "+w(r.currentPage+1)+" / "+w(a.value),1),r.currentPage<a.value-1?(p(),h("button",{key:1,class:"button ml-2",onClick:o[14]||(o[14]=i=>r.currentPage++)},[s("span",un,[m(v,{icon:["fas","angle-right"]})])])):F("",!0)])])):F("",!0)])],64)}}});const _n=ne(pn,[["__scopeId","data-v-0f3eff70"]]),B=e=>(Ee("data-v-845c81ae"),e=e(),ke(),e),hn={class:"section"},fn={class:"container"},mn=B(()=>s("h3",{class:"title"},[s("img",{src:Re,alt:"PaissaHouse Logo",class:"paissa-logo"}),S(" PaissaDB ")],-1)),vn=B(()=>s("h5",{class:"subtitle"},[S(" A list of houses for sale in Final Fantasy XIV, how many lottery bids are on each, and where to contribute using the "),s("a",{href:"https://github.com/zhudotexe/FFXIV_PaissaHouse",target:"_blank"},"PaissaHouse XIVLauncher plugin"),S(". ")],-1)),gn={key:0,class:"notification is-warning"},wn=B(()=>s("div",{class:"notification is-warning"},[S(" PaissaHouse has not yet been updated to be compatible with Patch 7.1! The data shown here is probably outdated. For updates, come join the "),s("a",{href:"https://discord.gg/GB8vPJ8tD5",target:"_blank"},"developer Discord"),S(". ")],-1)),Sn=B(()=>s("h4",{class:"title is-4 mt-4"},"Select a World",-1)),yn=B(()=>s("h6",{class:"subtitle is-6"},"Select a world to view the houses available on the world.",-1)),bn={key:1,class:"buttons"},Cn=["onClick"],En={key:2},kn=B(()=>s("span",{class:"loader is-inline-block"},null,-1)),Ln={class:"title is-4 mt-4"},$n={key:0,class:"loader is-inline-block"},An=B(()=>s("hr",null,null,-1)),Pn=B(()=>s("p",{class:"mb-2"},"Enjoy the site? Consider tipping to help me keep the servers alive!",-1)),Dn=V({__name:"PaissaViewer",setup(e){const t=be(),n=Ce(),c=le(new Je),r=z(!0),d=z(null),_=z(!1),C=H(()=>{let a=c.worlds;return a.sort((u,f)=>u.datacenter_name.localeCompare(f.datacenter_name)||u.name.localeCompare(f.name)),Object.entries(de.exports.groupBy(a,u=>u.datacenter_name))});async function g(a){await t.replace({query:{...n.query,world:a.id}}),await b(a.id)}async function b(a){d.value=a,_.value=!0,await c.loadWorld(a),_.value=!1}return pe(async()=>{c.init(),await c.getWorlds(),r.value=!1;const a=n.query.world;if(a){const u=+a;c.worldMap.has(u)&&await b(u)}}),Ue(()=>c.close()),(a,u)=>(p(),h("section",hn,[s("div",fn,[mn,vn,c.isDisconnected?(p(),h("div",gn," Disconnected from the server! Please refresh the page to stay up-to-date with the latest data. ")):F("",!0),wn,Sn,yn,r.value?(p(),h("div",En,[kn,S(" Loading worlds...")])):(p(),h("div",bn,[(p(!0),h(Y,null,te(C.value,([f,E],A)=>(p(),J(Ye,{class:"mr-2",key:A,label:f},{default:ye(()=>[(p(!0),h(Y,null,te(E,L=>(p(),h("a",{class:"dropdown-item",key:L.id,onClick:O=>g(L)},w(L.name),9,Cn))),128))]),_:2},1032,["label"]))),128))])),d.value?(p(),h(Y,{key:3},[s("h4",Ln,[S(w(c.worldName(d.value))+" ",1),_.value?(p(),h("span",$n)):F("",!0)]),_.value?F("",!0):(p(),J(_n,{key:0,client:c,"world-id":d.value},null,8,["client","world-id"]))],64)):F("",!0),An,Pn,m(He)])]))}});const Mn=ne(Dn,[["__scopeId","data-v-845c81ae"]]);export{Mn as default};
